---
import Layout from "../layouts/Layout.astro";
import penguins from "../assets/penguins.json";
import GraphicSpecies from "../components/GraphicSpecies.astro";

const penguinsAdelie = penguins.filter((p) => p.species === "Adelie");
const penguinsGentoo = penguins.filter((p) => p.species === "Gentoo");
const penguinsChinstrap = penguins.filter((p) => p.species === "Chinstrap");
---

<Layout>
  <div class="p-4">
    <h1 class="text-2xl font-bold mb-4">Navigation entre les esp√®ces</h1>

    <select id="species-slider" class="mb-6 border rounded px-2 py-1">
      <option value="adelie">Adelie</option>
      <option value="gentoo">Gentoo</option>
      <option value="chinstrap">Chinstrap</option>
    </select>

    <div class="slider-container">
      <section id="adelie" class="slide">
        <h2 class="text-xl font-semibold mb-2">Les penguins Adelie</h2>
        <GraphicSpecies species="Adelie" />
      </section>

      <section id="gentoo" class="slide">
        <h2 class="text-xl font-semibold mb-2">Gentoo</h2>
        <GraphicSpecies species="Gentoo" />
      </section>

      <section id="chinstrap" class="slide">
        <h2 class="text-xl font-semibold mb-2">Chinstrap</h2>
        <GraphicSpecies species="Chinstrap" />
      </section>
    </div>
  </div>

  <script>
    document.querySelector("#species-slider")?.addEventListener("change", (evt) => {
      const value = /** @type {HTMLSelectElement} */ (evt.target).value;
      location.hash = value;
    });
  </script>
</Layout>

<style>
  .slider-container {
    display: flex;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scroll-behavior: smooth;
    width: 100%;
  }

  .slide {
    flex: 0 0 100%;
    scroll-snap-align: start;
    padding: 1rem;
    box-sizing: border-box;
  }
</style>
